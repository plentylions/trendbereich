<script type="x/template" data-component="cookie-bar">
    <div class="cookie-bar" :class="{ 'out': !isVisible, 'border-top bg-white': isVisible, 'fixed-bottom': !isShopBuilder || false }">
        <div class="container-max" v-if="isVisible">
            <div class="row py-3" v-show="!isExpanded" :class="classes" :style="styles">
                <div class="col-12 col-md-8">

                    <p v-html="text"></p>

                    <div>
                        <template v-for="consentGroup in consentGroups">
                            <span v-if="consentGroup.consents.length > 0" class="custom-control custom-switch custom-control-appearance d-md-inline-block mr-3">
                                <input type="checkbox"
                                       class="custom-control-input"
                                       :id="_uid + '-group-' + consentGroup.key"
                                       :disabled="consentGroup.necessary"
                                       :checked="isConsented(consentGroup.key) || consentGroup.necessary"
                                       @change="toggleConsent(consentGroup.key)">
                                <label class="custom-control-label" :for="_uid + '-group-' + consentGroup.key">
                                    <template v-if="consentGroup.label.length > 0">
                                        ${ consentGroup.label }
                                    </template>
                                    <template v-else>
                                        ${ $translate("Ceres::Template.privacySettingsDefaultGroup") }
                                    </template>
                                </label>
                            </span>
                        </template>

                        <a href="#" class="text-primary text-appearance d-block d-md-inline-block" @click.prevent.stop="isExpanded=true">${ $translate("Ceres::Template.cookieBarMoreSettings") }</a>
                    </div>

                </div>
                <div class="col-12 col-md-4 pt-3 pt-md-0">
                    <button class="btn btn-primary btn-block btn-appearance" @click="acceptAll(); close(); location.reload();">${ $translate("Ceres::Template.cookieBarAcceptAll") }</button>
                    <button class="btn btn-default btn-block" @click="storeConsents(); close(); location.reload();">${ $translate("Ceres::Template.cookieBarSave") }</button>
                </div>

            </div>
            <div class="row py-3" v-if="isExpanded" :class="classes" :style="styles">
                <div class="col-12 mb-3">
                    <privacy-settings :consent-groups="consentGroups"></privacy-settings>
                </div>
                <div class="col-12 col-md-6">
                    <a href="#" class="text-primary text-appearance d-inline-block mb-3" @click.prevent.stop="isExpanded = false">${ $translate("Ceres::Template.cookieBarBack") }</a>
                </div>
                <div class="col-6 col-md-3">
                    <button class="btn btn-block btn-primary btn-appearance" @click="acceptAll(); close(); location.reload();">${ $translate("Ceres::Template.cookieBarAcceptAll") }</button>
                </div>
                <div class="col-6 col-md-3">
                    <button class="btn btn-block btn-block btn-default" @click="storeConsents(); close(); location.reload();">${ $translate("Ceres::Template.cookieBarSave") }</button>
                </div>
            </div>
        </div>

        <div v-else>
            <button class="btn btn-primary btn-appearance" @click.prevent.stop="isCollapsed = false">
                <i class="fa fa-shield float-none"></i>
                <span class="d-none d-sm-inline-block">${ $translate("Ceres::Template.cookieBarPrivacySettings") }</span>
            </button>
        </div>
    </div>
</script>